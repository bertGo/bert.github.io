---
layout: post
title : php常见漏洞攻防
#二级标题
subtitle : php.ini ADS jpg木马
author : Bert
header-img: img/post-bg-miui6.jpg
catalog : true
date : 2021-12-21 20:23
tags :
 - web安全
 - php安全
---

### php后门

> php常见后门

#### php.ini

> 利用php.ini 的auto_prepend_file 和 include_path
>
> 解决办法:检查ini文件,删除后门文件重启

- 首先上官网介绍:![php-security](C:\Rrui\notes\bertGo.github.io\img\code-img\php-security.png)在php加载之前,首先加载auto_prepend_file的文件,auto_append_file则是在php运行结束后,加载指定的文件

- 示例:![image-20211221204130490](C:\Rrui\notes\bertGo.github.io\img\code-img\image-20211221204130490.png)![image-20211221204500181](C:\Rrui\notes\bertGo.github.io\img\code-img\image-20211221204500181.png) 

  test.php文件内容:![image-20211221213638683](C:\Rrui\notes\bertGo.github.io\img\code-img\image-20211221213638683.png)

  我的index.php文件内容:![image-20211221205225412](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20211221205225412.png)

  运行结果:![image-20211221205719990](C:\Rrui\notes\bertGo.github.io\img\code-img\image-20211221205719990.png)
#### 图片木马

> 解决办法:waf扫描,检查后门

- 放个图片木马:![image-20211221214513218](C:\Rrui\notes\bertGo.github.io\img\code-img\image-20211221214513218.png)

  改名1.jpg:![image-20211221214532259](C:\Rrui\notes\bertGo.github.io\img\code-img\image-20211221214532259.png)

  然后用后门文件包含:![image-20211221214635442](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20211221214635442.png)

  运行: ![image-20211221214709171](C:\Rrui\notes\bertGo.github.io\img\code-img\image-20211221214709171.png)

  

